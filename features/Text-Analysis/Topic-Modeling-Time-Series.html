
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Topic Modeling — Time Series &#8212; Introduction to Cultural Analytics &amp; Python</title>
    
  <link rel="stylesheet" href="../../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.2d2078699c18a0efb88233928e1cf6ed.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/custom.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="canonical" href="https://melaniewalsh.github.io/Intro-Cultural-Analytics/features/Text-Analysis/Topic-Modeling-Time-Series.html" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />


<!-- Opengraph tags -->
<meta property="og:url"         content="https://melaniewalsh.github.io/Intro-Cultural-Analytics/features/Text-Analysis/Topic-Modeling-Time-Series.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="Topic Modeling — Time Series" />
<meta property="og:description" content="Topic Modeling — Time Series  In these lessons, we’re learning about a text analysis method called topic modeling. This method will help us identify the main to" />
<meta property="og:image"       content="https://melaniewalsh.github.io/Intro-Cultural-Analytics/_static/favicon.ico" />

<meta name="twitter:card" content="summary" />


  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
  
  <img src="../../_static/favicon.ico" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Introduction to Cultural Analytics & Python</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <p class="caption">
 <span class="caption-text">
  How To
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../How-To-Interact-With-This-Book.html">
   Interact With This Book
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  The Course
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../course-schedule.html">
   Course Schedule
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../syllabus.html">
   Course Syllabus
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  The Book
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../Command-Line/The-Command-Line.html">
   The Command Line
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../Python/Python.html">
   Programming in Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../Data-Analysis/Data-Analysis.html">
   Data Analysis (Pandas)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../Data-Collection/Data-Collection.html">
   Data Collection (Web Scraping, APIs)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../Text-Analysis/Text-Analysis.html">
   Text Analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../Network-Analysis/Network-Analysis-Home.html">
   Network Analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../Mapping/Mapping-Home.html">
   Mapping
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Datasets
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../Datasets/Datasets.html">
   Datasets
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Extra Materials
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../Python/Jupyter-Tips-Tricks.html">
   Jupyter Tips &amp; Tricks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../Python/Randomize-Students.html">
   Make Random Student Groups
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/features/Text-Analysis/Topic-Modeling-Time-Series.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/melaniewalsh/Intro-Cultural-Analytics"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/melaniewalsh/Intro-Cultural-Analytics/issues/new?title=Issue%20on%20page%20%2Ffeatures/Text-Analysis/Topic-Modeling-Time-Series.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/melaniewalsh/Intro-Cultural-Analytics/master?urlpath=lab/tree/book/features/Text-Analysis/Topic-Modeling-Time-Series.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dataset">
   Dataset
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#trump-s-tweets">
     Trump’s Tweets
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#set-mallet-path">
   Set MALLET Path
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install-packages">
   Install Packages
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#import-packages">
   Import Packages
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#get-training-data-from-csv-file">
   Get Training Data From CSV File
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#trump-tweets">
   Trump Tweets
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#process-trump-tweets">
     Process Trump Tweets
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#get-original-trump-tweets">
     Get Original Trump Tweets
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#get-dataset-statistics">
     Get Dataset Statistics
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#training-the-topic-model">
   Training the Topic Model
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#set-number-of-topics">
     Set Number of Topics
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#set-training-data">
     Set Training Data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#set-other-mallet-file-paths">
     Set Other MALLET File Paths
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#import-data">
     Import Data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#train-topic-model">
     Train Topic Model
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#display-topics-and-top-words">
   Display Topics and Top Words
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#display-top-tweets-for-topic">
   Display Top Tweets For Topic
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#load-topic-distributions">
   Load Topic Distributions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#show-topic-words-in-context-of-full-tweet">
   Show Topic Words in Context of Full Tweet
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#plot-topics-over-time">
   Plot Topics Over Time
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   Load Topic Distributions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#add-topic-distribution-columns">
   Add Topic Distribution Columns
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#date-formatting-for-time-series-plot">
   Date Formatting For Time Series Plot
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#plot-individual-topics-as-time-series">
   Plot Individual Topics as Time Series
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="topic-modeling-time-series">
<h1>Topic Modeling — Time Series<a class="headerlink" href="#topic-modeling-time-series" title="Permalink to this headline">¶</a></h1>
<p>In these lessons, we’re learning about a text analysis method called <em>topic modeling</em>. This method will help us identify the main topics or discourses within a collection of texts or  single text that has been separated into smaller text chunks.</p>
<div class="section" id="dataset">
<h2>Dataset<a class="headerlink" href="#dataset" title="Permalink to this headline">¶</a></h2>
<div class="section" id="trump-s-tweets">
<h3>Trump’s Tweets<a class="headerlink" href="#trump-s-tweets" title="Permalink to this headline">¶</a></h3>
<blockquote class="epigraph">
<div><p>I hear that Fake News CNN just reported that I am isolated in the White House wondering out loud “when will life return to normal?” Does anybody really believe that?</p>
<p class="attribution">—Donald Trump, <a class="reference external" href="https://twitter.com/realdonaldtrump/status/1242929613262725122?lang=en">March 25th 2020 tweet</a></p>
</div></blockquote>
<p>In this particular lesson, we’re going to use <a class="reference external" href="https://github.com/maria-antoniak/little-mallet-wrapper">Little MALLET Wrapper</a>, a Python wrapper for <a class="reference external" href="http://mallet.cs.umass.edu/topics.php">MALLET</a>, to topic model a CSV file of Donald Trump’s tweets and plot the fluctuation of topics over time.</p>
<hr class="docutils" />
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>If you’re working in this Jupyter notebook on your own computer, you’ll need to have both the Java Development Kit and MALLET pre-installed. For set up instructions, please see <a class="reference external" href="http://melaniewalsh.github.io/Intro-Cultural-Analytics/Text-Analysis/Topic-Modeling-Set-Up.html">the previous lesson</a>.</p>
<p>*If you’re working in this Jupyter notebook in the cloud via Binder, then the Java Development Kit and Mallet will already be installed. You’re good to go!</p>
</div>
</div>
</div>
<div class="section" id="set-mallet-path">
<h2>Set MALLET Path<a class="headerlink" href="#set-mallet-path" title="Permalink to this headline">¶</a></h2>
<p>Since Little MALLET Wrapper is a Python package built around MALLET, we first need to tell it where the bigger, Java-based MALLET lives.</p>
<p>We’re going to make a variable called <code class="docutils literal notranslate"><span class="pre">path_to_mallet</span></code> and assign it the file path of our MALLET program. We need to point it, specifically, to the “mallet” file inside the “bin” folder inside the “mallet-2.0.8” folder.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">path_to_mallet</span> <span class="o">=</span> <span class="s1">&#39;mallet-2.0.8/bin/mallet&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>If MALLET is located in another directory, then set your <code class="docutils literal notranslate"><span class="pre">path_to_mallet</span></code> to that file path.</p>
</div>
<div class="section" id="install-packages">
<h2>Install Packages<a class="headerlink" href="#install-packages" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="ch">#!pip install little_mallet_wrapper</span>
<span class="c1">#!pip install seaborn</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="import-packages">
<h2>Import Packages<a class="headerlink" href="#import-packages" title="Permalink to this headline">¶</a></h2>
<p>Now let’s <code class="docutils literal notranslate"><span class="pre">import</span></code> the <code class="docutils literal notranslate"><span class="pre">little_mallet_wrapper</span></code> and the data viz library <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">little_mallet_wrapper</span>
<span class="kn">import</span> <span class="nn">seaborn</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">max_colwidth</span> <span class="o">=</span> <span class="mi">100</span>
</pre></div>
</div>
</div>
</div>
<p>We’re also going to import <a class="reference external" href="https://docs.python.org/3/library/glob.html"><code class="docutils literal notranslate"><span class="pre">glob</span></code></a> and <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#basic-use"><code class="docutils literal notranslate"><span class="pre">pathlib</span></code></a> for working with files and the file system.</p>
</div>
<div class="section" id="get-training-data-from-csv-file">
<h2>Get Training Data From CSV File<a class="headerlink" href="#get-training-data-from-csv-file" title="Permalink to this headline">¶</a></h2>
<p>Before we topic model Donald Trump’s tweets, we need to process the tweets and prepare them for analysis. The steps below demonstrate how to process texts if they come from a CSV file.</p>
<p>Note: We’re calling these text files our <em>training data</em>, because we’re <em>training</em> our topic model with these texts. The topic model will be learning and extracting topics based on these texts.</p>
</div>
<div class="section" id="trump-tweets">
<h2>Trump Tweets<a class="headerlink" href="#trump-tweets" title="Permalink to this headline">¶</a></h2>
<p>This dataset of Donald Trump’s tweets is taken from <a class="reference external" href="http://www.trumptwitterarchive.com/">Trump Twitter Archive</a>. To read in the CSV file, we’re going to use Pandas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trump_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;../texts/politics/Trump-Tweets.csv&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trump_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>source</th>
      <th>text</th>
      <th>created_at</th>
      <th>retweet_count</th>
      <th>favorite_count</th>
      <th>is_retweet</th>
      <th>id_str</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Twitter for iPhone</td>
      <td>Just finished a very good conversation with President Xi of China. Discussed in great detail the...</td>
      <td>03-27-2020 05:19:02</td>
      <td>33074</td>
      <td>202087</td>
      <td>False</td>
      <td>1243407157321560000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Twitter for iPhone</td>
      <td>Will be interviewed on @seanhannity at 9:10 P.M. @FoxNews</td>
      <td>03-27-2020 01:05:59</td>
      <td>7419</td>
      <td>42186</td>
      <td>False</td>
      <td>1243343475799720000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Twitter for iPhone</td>
      <td>The world is at war with a hidden enemy. WE WILL WIN! https://t.co/QLceNWcL6Z</td>
      <td>03-26-2020 23:50:02</td>
      <td>24472</td>
      <td>97346</td>
      <td>False</td>
      <td>1243324360523490000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Twitter for iPhone</td>
      <td>Our great Oil &amp;amp; Gas industry is under under seige after having one of the best years in reco...</td>
      <td>03-26-2020 23:06:28</td>
      <td>25514</td>
      <td>131210</td>
      <td>False</td>
      <td>1243313399284500000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Twitter for iPhone</td>
      <td>Will be going out in 10 minutes for the press conference.</td>
      <td>03-26-2020 20:57:15</td>
      <td>15797</td>
      <td>130201</td>
      <td>False</td>
      <td>1243280878991790000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trump_df</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">trump_df</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="process-trump-tweets">
<h3>Process Trump Tweets<a class="headerlink" href="#process-trump-tweets" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">training_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">little_mallet_wrapper</span><span class="o">.</span><span class="n">process_string</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">numbers</span><span class="o">=</span><span class="s1">&#39;remove&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">trump_df</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="get-original-trump-tweets">
<h3>Get Original Trump Tweets<a class="headerlink" href="#get-original-trump-tweets" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">original_trump_tweets</span> <span class="o">=</span> <span class="p">[</span><span class="n">title</span> <span class="k">for</span> <span class="n">title</span> <span class="ow">in</span> <span class="n">trump_df</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="get-dataset-statistics">
<h3>Get Dataset Statistics<a class="headerlink" href="#get-dataset-statistics" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">little_mallet_wrapper</span><span class="o">.</span><span class="n">print_dataset_stats</span><span class="p">(</span><span class="n">training_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Number of Documents: 29395
Mean Number of Words: 13.0
Vocabulary Size: 33945
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="training-the-topic-model">
<h2>Training the Topic Model<a class="headerlink" href="#training-the-topic-model" title="Permalink to this headline">¶</a></h2>
<p>We’re going to train our topic model with the <code class="docutils literal notranslate"><span class="pre">little_mallet_wrapper.train_topic_model()</span></code> function.</p>
<p>So we have to set a few things up first.</p>
<div class="section" id="set-number-of-topics">
<h3>Set Number of Topics<a class="headerlink" href="#set-number-of-topics" title="Permalink to this headline">¶</a></h3>
<p>We need to make a variable <code class="docutils literal notranslate"><span class="pre">num_topics</span></code> and assign it the number of topics we want returned.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">num_topics</span> <span class="o">=</span> <span class="mi">35</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="set-training-data">
<h3>Set Training Data<a class="headerlink" href="#set-training-data" title="Permalink to this headline">¶</a></h3>
<p>We already made a variable called <code class="docutils literal notranslate"><span class="pre">training_data</span></code>, which includes all of our processed Reddit post texts, so we can just set it equal to itself.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">training_data</span> <span class="o">=</span> <span class="n">training_data</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="set-other-mallet-file-paths">
<h3>Set Other MALLET File Paths<a class="headerlink" href="#set-other-mallet-file-paths" title="Permalink to this headline">¶</a></h3>
<p>Then we’re going to set a file path where we want all our MALLET topic modeling data to be dumped. I’m going to output everything onto my Desktop inside a folder called “topic-model-output” and a subfolder specific to the Reddit posts called “Reddit.”</p>
<p>All the other necessary variables below <code class="docutils literal notranslate"><span class="pre">output_directory_path</span></code> will be automatically created inside this directory.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Change to your desired output directory</span>
<span class="n">output_directory_path</span> <span class="o">=</span> <span class="s1">&#39;topic-model-output/Trump-Tweets&#39;</span>

<span class="c1">#No need to change anything below here</span>
<span class="n">Path</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">output_directory_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">path_to_training_data</span>           <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">output_directory_path</span><span class="si">}</span><span class="s2">/training.txt&quot;</span>
<span class="n">path_to_formatted_training_data</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">output_directory_path</span><span class="si">}</span><span class="s2">/mallet.training&quot;</span>
<span class="n">path_to_model</span>                   <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">output_directory_path</span><span class="si">}</span><span class="s2">/mallet.model.</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">num_topics</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="n">path_to_topic_keys</span>              <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">output_directory_path</span><span class="si">}</span><span class="s2">/mallet.topic_keys.</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">num_topics</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="n">path_to_topic_distributions</span>     <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">output_directory_path</span><span class="si">}</span><span class="s2">/mallet.topic_distributions.</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">num_topics</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="import-data">
<h3>Import Data<a class="headerlink" href="#import-data" title="Permalink to this headline">¶</a></h3>
<p>We’re going to import the data with <code class="docutils literal notranslate"><span class="pre">little_mallet_wrapper.import_data()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">little_mallet_wrapper</span><span class="o">.</span><span class="n">import_data</span><span class="p">(</span><span class="n">path_to_mallet</span><span class="p">,</span>
                <span class="n">path_to_training_data</span><span class="p">,</span>
                <span class="n">path_to_formatted_training_data</span><span class="p">,</span>
                <span class="n">training_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Importing data...
Complete
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="train-topic-model">
<h3>Train Topic Model<a class="headerlink" href="#train-topic-model" title="Permalink to this headline">¶</a></h3>
<p>Then we’re going to train our topic model with <code class="docutils literal notranslate"><span class="pre">little_mallet_wrapper.train_topic_model()</span></code>. The topic model should take about 1-1.5 minutes to train and complete. If you want it, you can look at your Terminal or PowerShell and see what the model looks like as it’s training.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">little_mallet_wrapper</span><span class="o">.</span><span class="n">train_topic_model</span><span class="p">(</span><span class="n">path_to_mallet</span><span class="p">,</span>
                      <span class="n">path_to_formatted_training_data</span><span class="p">,</span>
                      <span class="n">path_to_model</span><span class="p">,</span>
                      <span class="n">path_to_topic_keys</span><span class="p">,</span>
                      <span class="n">path_to_topic_distributions</span><span class="p">,</span>
                      <span class="n">num_topics</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Training topic model...
Complete
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="display-topics-and-top-words">
<h2>Display Topics and Top Words<a class="headerlink" href="#display-topics-and-top-words" title="Permalink to this headline">¶</a></h2>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topics</span> <span class="o">=</span> <span class="n">little_mallet_wrapper</span><span class="o">.</span><span class="n">load_topic_keys</span><span class="p">(</span><span class="n">path_to_topic_keys</span><span class="p">)</span>

<span class="k">for</span> <span class="n">topic_number</span><span class="p">,</span> <span class="n">topic</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">topics</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✨Topic </span><span class="si">{</span><span class="n">topic_number</span><span class="si">}</span><span class="s2">✨</span><span class="se">\n\n</span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>✨Topic 0✨

[&#39;fbi&#39;, &#39;campaign&#39;, &#39;clinton&#39;, &#39;trump&#39;, &#39;collusion&#39;, &#39;russia&#39;, &#39;mueller&#39;, &#39;hillary&#39;, &#39;comey&#39;, &#39;report&#39;, &#39;general&#39;, &#39;investigation&#39;, &#39;james&#39;, &#39;information&#39;, &#39;dossier&#39;, &#39;russian&#39;, &#39;intelligence&#39;, &#39;former&#39;, &#39;emails&#39;, &#39;attorney&#39;]

✨Topic 1✨

[&#39;http&#39;, &#39;tonight&#39;, &#39;interview&#39;, &#39;enjoy&#39;, &#39;foxnews&#39;, &#39;foxandfriends&#39;, &#39;interviewed&#39;, &#39;morning&#39;, &#39;watch&#39;, &#39;discussing&#39;, &#39;show&#39;, &#39;fox&#39;, &#39;miss&#39;, &#39;seanhannity&#39;, &#39;tomorrow&#39;, &#39;today&#39;, &#39;friends&#39;, &#39;minutes&#39;, &#39;cnn&#39;, &#39;bit&#39;]

✨Topic 2✨

[&#39;https&#39;, &#39;women&#39;, &#39;today&#39;, &#39;law&#39;, &#39;american&#39;, &#39;people&#39;, &#39;nation&#39;, &#39;day&#39;, &#39;thank&#39;, &#39;god&#39;, &#39;men&#39;, &#39;families&#39;, &#39;enforcement&#39;, &#39;country&#39;, &#39;service&#39;, &#39;first&#39;, &#39;love&#39;, &#39;lives&#39;, &#39;america&#39;, &#39;bless&#39;]

✨Topic 3✨

[&#39;obama&#39;, &#39;iran&#39;, &#39;isis&#39;, &#39;attack&#39;, &#39;syria&#39;, &#39;iraq&#39;, &#39;back&#39;, &#39;president&#39;, &#39;many&#39;, &#39;people&#39;, &#39;stop&#39;, &#39;war&#39;, &#39;fight&#39;, &#39;must&#39;, &#39;nuclear&#39;, &#39;ebola&#39;, &#39;oil&#39;, &#39;turkey&#39;, &#39;home&#39;, &#39;time&#39;]

✨Topic 4✨

[&#39;china&#39;, &#39;trade&#39;, &#39;deal&#39;, &#39;money&#39;, &#39;dollars&#39;, &#39;much&#39;, &#39;countries&#39;, &#39;billion&#39;, &#39;tariffs&#39;, &#39;many&#39;, &#39;pay&#39;, &#39;billions&#39;, &#39;farmers&#39;, &#39;deals&#39;, &#39;mexico&#39;, &#39;big&#39;, &#39;make&#39;, &#39;country&#39;, &#39;made&#39;, &#39;want&#39;]

✨Topic 5✨

[&#39;https&#39;, &#39;thanks&#39;, &#39;thank&#39;, &#39;realdonaldtrump&#39;, &#39;true&#39;, &#39;nice&#39;, &#39;trump&#39;, &#39;words&#39;, &#39;great&#39;, &#39;agree&#39;, &#39;dbongino&#39;, &#39;kind&#39;, &#39;david&#39;, &#39;promises&#39;, &#39;donaldjtrumpjr&#39;, &#39;foxandfriends&#39;, &#39;comments&#39;, &#39;appreciate&#39;, &#39;teamtrump&#39;, &#39;greatly&#39;]

✨Topic 6✨

[&#39;think&#39;, &#39;big&#39;, &#39;like&#39;, &#39;work&#39;, &#39;success&#39;, &#39;entrepreneurs&#39;, &#39;keep&#39;, &#39;know&#39;, &#39;people&#39;, &#39;never&#39;, &#39;always&#39;, &#39;give&#39;, &#39;deal&#39;, &#39;focus&#39;, &#39;good&#39;, &#39;way&#39;, &#39;best&#39;, &#39;business&#39;, &#39;get&#39;, &#39;going&#39;]

✨Topic 7✨

[&#39;https&#39;, &#39;thank&#39;, &#39;trump&#39;, &#39;makeamericagreatagain&#39;, &#39;join&#39;, &#39;maga&#39;, &#39;tomorrow&#39;, &#39;see&#39;, &#39;soon&#39;, &#39;ohio&#39;, &#39;get&#39;, &#39;iowa&#39;, &#39;kag&#39;, &#39;florida&#39;, &#39;vote&#39;, &#39;rally&#39;, &#39;support&#39;, &#39;tonight&#39;, &#39;tickets&#39;, &#39;americafirst&#39;]

✨Topic 8✨

[&#39;https&#39;, &#39;great&#39;, &#39;today&#39;, &#39;honor&#39;, &#39;whitehouse&#39;, &#39;realdonaldtrump&#39;, &#39;president&#39;, &#39;first&#39;, &#39;thank&#39;, &#39;welcome&#39;, &#39;honored&#39;, &#39;national&#39;, &#39;flotus&#39;, &#39;melania&#39;, &#39;freedom&#39;, &#39;address&#39;, &#39;presidential&#39;, &#39;speech&#39;, &#39;potus&#39;, &#39;lady&#39;]

✨Topic 9✨

[&#39;border&#39;, &#39;wall&#39;, &#39;security&#39;, &#39;country&#39;, &#39;must&#39;, &#39;immigration&#39;, &#39;illegal&#39;, &#39;democrats&#39;, &#39;want&#39;, &#39;people&#39;, &#39;mexico&#39;, &#39;stop&#39;, &#39;southern&#39;, &#39;national&#39;, &#39;crime&#39;, &#39;laws&#39;, &#39;need&#39;, &#39;borders&#39;, &#39;get&#39;, &#39;strong&#39;]

✨Topic 10✨

[&#39;hillary&#39;, &#39;crooked&#39;, &#39;clinton&#39;, &#39;court&#39;, &#39;democrats&#39;, &#39;bernie&#39;, &#39;people&#39;, &#39;election&#39;, &#39;dems&#39;, &#39;mueller&#39;, &#39;bad&#39;, &#39;collusion&#39;, &#39;want&#39;, &#39;angry&#39;, &#39;supreme&#39;, &#39;never&#39;, &#39;report&#39;, &#39;even&#39;, &#39;justice&#39;, &#39;russia&#39;]

✨Topic 11✨

[&#39;obamacare&#39;, &#39;tax&#39;, &#39;bill&#39;, &#39;republicans&#39;, &#39;obama&#39;, &#39;get&#39;, &#39;must&#39;, &#39;cuts&#39;, &#39;healthcare&#39;, &#39;care&#39;, &#39;congress&#39;, &#39;plan&#39;, &#39;taxes&#39;, &#39;disaster&#39;, &#39;reform&#39;, &#39;cut&#39;, &#39;need&#39;, &#39;act&#39;, &#39;pass&#39;, &#39;vote&#39;]

✨Topic 12✨

[&#39;like&#39;, &#39;really&#39;, &#39;would&#39;, &#39;people&#39;, &#39;show&#39;, &#39;bad&#39;, &#39;got&#39;, &#39;total&#39;, &#39;time&#39;, &#39;never&#39;, &#39;losers&#39;, &#39;fired&#39;, &#39;badly&#39;, &#39;went&#39;, &#39;stupid&#39;, &#39;made&#39;, &#39;failing&#39;, &#39;see&#39;, &#39;magazine&#39;, &#39;haters&#39;]

✨Topic 13✨

[&#39;last&#39;, &#39;night&#39;, &#39;celebapprentice&#39;, &#39;http&#39;, &#39;apprentice&#39;, &#39;great&#39;, &#39;apprenticenbc&#39;, &#39;nbc&#39;, &#39;watch&#39;, &#39;week&#39;, &#39;season&#39;, &#39;celebrity&#39;, &#39;star&#39;, &#39;tonight&#39;, &#39;show&#39;, &#39;live&#39;, &#39;sunday&#39;, &#39;see&#39;, &#39;two&#39;, &#39;amazing&#39;]

✨Topic 14✨

[&#39;record&#39;, &#39;economy&#39;, &#39;ever&#39;, &#39;since&#39;, &#39;numbers&#39;, &#39;market&#39;, &#39;year&#39;, &#39;high&#39;, &#39;best&#39;, &#39;unemployment&#39;, &#39;time&#39;, &#39;stock&#39;, &#39;jobs&#39;, &#39;years&#39;, &#39;highest&#39;, &#39;low&#39;, &#39;rate&#39;, &#39;fed&#39;, &#39;history&#39;, &#39;economic&#39;]

✨Topic 15✨

[&#39;http&#39;, &#39;false&#39;, &#39;barackobama&#39;, &#39;twitter&#39;, &#39;client&#39;, &#39;web&#39;, &#39;cont&#39;, &#39;obama&#39;, &#39;china&#39;, &#39;mittromney&#39;, &#39;wind&#39;, &#39;oil&#39;, &#39;gas&#39;, &#39;debt&#39;, &#39;energy&#39;, &#39;beta&#39;, &#39;twitlonger&#39;, &#39;turbines&#39;, &#39;scotland&#39;, &#39;alexsalmond&#39;]

✨Topic 16✨

[&#39;president&#39;, &#39;obama&#39;, &#39;would&#39;, &#39;much&#39;, &#39;get&#39;, &#39;trump&#39;, &#39;said&#39;, &#39;better&#39;, &#39;even&#39;, &#39;could&#39;, &#39;think&#39;, &#39;never&#39;, &#39;like&#39;, &#39;done&#39;, &#39;right&#39;, &#39;far&#39;, &#39;know&#39;, &#39;thought&#39;, &#39;administration&#39;, &#39;else&#39;]

✨Topic 17✨

[&#39;great&#39;, &#39;vote&#39;, &#39;state&#39;, &#39;strong&#39;, &#39;endorsement&#39;, &#39;job&#39;, &#39;governor&#39;, &#39;total&#39;, &#39;crime&#39;, &#39;military&#39;, &#39;big&#39;, &#39;win&#39;, &#39;complete&#39;, &#39;vets&#39;, &#39;get&#39;, &#39;loves&#39;, &#39;senator&#39;, &#39;amendment&#39;, &#39;john&#39;, &#39;republican&#39;]

✨Topic 18✨

[&#39;news&#39;, &#39;fake&#39;, &#39;media&#39;, &#39;story&#39;, &#39;people&#39;, &#39;bad&#39;, &#39;dishonest&#39;, &#39;cnn&#39;, &#39;even&#39;, &#39;totally&#39;, &#39;never&#39;, &#39;reporting&#39;, &#39;nytimes&#39;, &#39;failing&#39;, &#39;many&#39;, &#39;stories&#39;, &#39;much&#39;, &#39;press&#39;, &#39;made&#39;, &#39;fact&#39;]

✨Topic 19✨

[&#39;great&#39;, &#39;america&#39;, &#39;make&#39;, &#39;https&#39;, &#39;hard&#39;, &#39;work&#39;, &#39;working&#39;, &#39;keep&#39;, &#39;thank&#39;, &#39;together&#39;, &#39;let&#39;, &#39;going&#39;, &#39;making&#39;, &#39;country&#39;, &#39;get&#39;, &#39;time&#39;, &#39;sure&#39;, &#39;safe&#39;, &#39;job&#39;, &#39;never&#39;]

✨Topic 20✨

[&#39;years&#39;, &#39;one&#39;, &#39;time&#39;, &#39;many&#39;, &#39;country&#39;, &#39;history&#39;, &#39;people&#39;, &#39;two&#39;, &#39;ever&#39;, &#39;long&#39;, &#39;ago&#39;, &#39;president&#39;, &#39;done&#39;, &#39;greatest&#39;, &#39;first&#39;, &#39;never&#39;, &#39;would&#39;, &#39;world&#39;, &#39;last&#39;, &#39;far&#39;]

✨Topic 21✨

[&#39;new&#39;, &#39;york&#39;, &#39;great&#39;, &#39;book&#39;, &#39;https&#39;, &#39;times&#39;, &#39;office&#39;, &#39;hampshire&#39;, &#39;washington&#39;, &#39;post&#39;, &#39;today&#39;, &#39;real&#39;, &#39;read&#39;, &#39;one&#39;, &#39;trump&#39;, &#39;america&#39;, &#39;old&#39;, &#39;order&#39;, &#39;story&#39;, &#39;really&#39;]

✨Topic 22✨

[&#39;happy&#39;, &#39;day&#39;, &#39;obama&#39;, &#39;year&#39;, &#39;everyone&#39;, &#39;https&#39;, &#39;birthday&#39;, &#39;million&#39;, &#39;hope&#39;, &#39;find&#39;, &#39;next&#39;, &#39;today&#39;, &#39;charity&#39;, &#39;see&#39;, &#39;ask&#39;, &#39;family&#39;, &#39;people&#39;, &#39;barackobama&#39;, &#39;answer&#39;, &#39;college&#39;]

✨Topic 23✨

[&#39;great&#39;, &#39;big&#39;, &#39;people&#39;, &#39;crowd&#39;, &#39;state&#39;, &#39;carolina&#39;, &#39;see&#39;, &#39;amazing&#39;, &#39;speech&#39;, &#39;south&#39;, &#39;florida&#39;, &#39;hurricane&#39;, &#39;back&#39;, &#39;iowa&#39;, &#39;going&#39;, &#39;ready&#39;, &#39;soon&#39;, &#39;day&#39;, &#39;rally&#39;, &#39;today&#39;]

✨Topic 24✨

[&#39;like&#39;, &#39;mike&#39;, &#39;debate&#39;, &#39;get&#39;, &#39;failed&#39;, &#39;campaign&#39;, &#39;presidential&#39;, &#39;time&#39;, &#39;mitt&#39;, &#39;romney&#39;, &#39;last&#39;, &#39;bad&#39;, &#39;paul&#39;, &#39;won&#39;, &#39;pence&#39;, &#39;candidate&#39;, &#39;way&#39;, &#39;run&#39;, &#39;put&#39;, &#39;win&#39;]

✨Topic 25✨

[&#39;poll&#39;, &#39;cruz&#39;, &#39;bush&#39;, &#39;wow&#39;, &#39;cnn&#39;, &#39;ted&#39;, &#39;jeb&#39;, &#39;ratings&#39;, &#39;debate&#39;, &#39;polls&#39;, &#39;total&#39;, &#39;big&#39;, &#39;rubio&#39;, &#39;lightweight&#39;, &#39;one&#39;, &#39;show&#39;, &#39;trump&#39;, &#39;said&#39;, &#39;foxnews&#39;, &#39;new&#39;]

✨Topic 26✨

[&#39;witch&#39;, &#39;hunt&#39;, &#39;president&#39;, &#39;call&#39;, &#39;schiff&#39;, &#39;never&#39;, &#39;nothing&#39;, &#39;biden&#39;, &#39;said&#39;, &#39;ukraine&#39;, &#39;joe&#39;, &#39;democrats&#39;, &#39;whistleblower&#39;, &#39;impeachment&#39;, &#39;read&#39;, &#39;even&#39;, &#39;adam&#39;, &#39;scam&#39;, &#39;wrong&#39;, &#39;hoax&#39;]

✨Topic 27✨

[&#39;democrats&#39;, &#39;party&#39;, &#39;republican&#39;, &#39;impeachment&#39;, &#39;nothing&#39;, &#39;pelosi&#39;, &#39;house&#39;, &#39;dems&#39;, &#39;republicans&#39;, &#39;nancy&#39;, &#39;left&#39;, &#39;democrat&#39;, &#39;senate&#39;, &#39;vote&#39;, &#39;want&#39;, &#39;radical&#39;, &#39;realdonaldtrump&#39;, &#39;going&#39;, &#39;chuck&#39;, &#39;win&#39;]

✨Topic 28✨

[&#39;united&#39;, &#39;states&#39;, &#39;one&#39;, &#39;minister&#39;, &#39;prime&#39;, &#39;people&#39;, &#39;president&#39;, &#39;force&#39;, &#39;may&#39;, &#39;israel&#39;, &#39;nations&#39;, &#39;country&#39;, &#39;time&#39;, &#39;air&#39;, &#39;around&#39;, &#39;continue&#39;, &#39;japan&#39;, &#39;see&#39;, &#39;world&#39;, &#39;warren&#39;]

✨Topic 29✨

[&#39;trump&#39;, &#39;http&#39;, &#39;via&#39;, &#39;donald&#39;, &#39;tower&#39;, &#39;hotel&#39;, &#39;breitbartnews&#39;, &#39;media&#39;, &#39;com&#39;, &#39;newsmax&#39;, &#39;macys&#39;, &#39;gop&#39;, &#39;best&#39;, &#39;star&#39;, &#39;trumpchicago&#39;, &#39;nyc&#39;, &#39;ties&#39;, &#39;collection&#39;, &#39;signature&#39;, &#39;top&#39;]

✨Topic 30✨

[&#39;trump&#39;, &#39;http&#39;, &#39;golf&#39;, &#39;course&#39;, &#39;national&#39;, &#39;world&#39;, &#39;club&#39;, &#39;doral&#39;, &#39;beautiful&#39;, &#39;top&#39;, &#39;new&#39;, &#39;best&#39;, &#39;great&#39;, &#39;trumpdoral&#39;, &#39;scotland&#39;, &#39;miami&#39;, &#39;secretary&#39;, &#39;one&#39;, &#39;blue&#39;, &#39;open&#39;]

✨Topic 31✨

[&#39;jobs&#39;, &#39;american&#39;, &#39;back&#39;, &#39;https&#39;, &#39;america&#39;, &#39;bring&#39;, &#39;workers&#39;, &#39;new&#39;, &#39;business&#39;, &#39;coming&#39;, &#39;companies&#39;, &#39;create&#39;, &#39;economy&#39;, &#39;country&#39;, &#39;americans&#39;, &#39;small&#39;, &#39;tax&#39;, &#39;right&#39;, &#39;usa&#39;, &#39;reagan&#39;]

✨Topic 32✨

[&#39;forward&#39;, &#39;looking&#39;, &#39;house&#39;, &#39;white&#39;, &#39;look&#39;, &#39;meeting&#39;, &#39;good&#39;, &#39;korea&#39;, &#39;great&#39;, &#39;north&#39;, &#39;president&#39;, &#39;many&#39;, &#39;big&#39;, &#39;much&#39;, &#39;china&#39;, &#39;today&#39;, &#39;well&#39;, &#39;kim&#39;, &#39;also&#39;, &#39;day&#39;]

✨Topic 33✨

[&#39;great&#39;, &#39;good&#39;, &#39;congratulations&#39;, &#39;job&#39;, &#39;guy&#39;, &#39;luck&#39;, &#39;well&#39;, &#39;win&#39;, &#39;really&#39;, &#39;friend&#39;, &#39;wonderful&#39;, &#39;truly&#39;, &#39;mark&#39;, &#39;team&#39;, &#39;fantastic&#39;, &#39;amazing&#39;, &#39;game&#39;, &#39;man&#39;, &#39;thanks&#39;, &#39;proud&#39;]

✨Topic 34✨

[&#39;global&#39;, &#39;warming&#39;, &#39;even&#39;, &#39;many&#39;, &#39;change&#39;, &#39;case&#39;, &#39;country&#39;, &#39;could&#39;, &#39;fast&#39;, &#39;control&#39;, &#39;california&#39;, &#39;others&#39;, &#39;problem&#39;, &#39;right&#39;, &#39;worse&#39;, &#39;never&#39;, &#39;bad&#39;, &#39;mayor&#39;, &#39;gun&#39;, &#39;sad&#39;]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="display-top-tweets-for-topic">
<h2>Display Top Tweets For Topic<a class="headerlink" href="#display-top-tweets-for-topic" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="load-topic-distributions">
<h2>Load Topic Distributions<a class="headerlink" href="#load-topic-distributions" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topic_distributions</span> <span class="o">=</span> <span class="n">little_mallet_wrapper</span><span class="o">.</span><span class="n">load_topic_distributions</span><span class="p">(</span><span class="n">path_to_topic_distributions</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tweet_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">training_data</span><span class="p">,</span> <span class="n">original_trump_tweets</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">display_top_tweets_per_topic</span><span class="p">(</span><span class="n">topic_number</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">number_of_documents</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✨Topic </span><span class="si">{</span><span class="n">topic_number</span><span class="si">}</span><span class="s2">✨</span><span class="se">\n\n</span><span class="si">{</span><span class="n">topics</span><span class="p">[</span><span class="n">topic_number</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">probability</span><span class="p">,</span> <span class="n">document</span> <span class="ow">in</span> <span class="n">little_mallet_wrapper</span><span class="o">.</span><span class="n">get_top_docs</span><span class="p">(</span><span class="n">training_data</span><span class="p">,</span> <span class="n">topic_distributions</span><span class="p">,</span> <span class="n">topic_number</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="n">number_of_documents</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">probability</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">tweet_dict</span><span class="p">[</span><span class="n">document</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">display_top_tweets_per_topic</span><span class="p">(</span><span class="n">topic_number</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">number_of_documents</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>✨Topic 0✨

[&#39;fbi&#39;, &#39;campaign&#39;, &#39;clinton&#39;, &#39;trump&#39;, &#39;collusion&#39;, &#39;russia&#39;, &#39;mueller&#39;, &#39;hillary&#39;, &#39;comey&#39;, &#39;report&#39;, &#39;general&#39;, &#39;investigation&#39;, &#39;james&#39;, &#39;information&#39;, &#39;dossier&#39;, &#39;russian&#39;, &#39;intelligence&#39;, &#39;former&#39;, &#39;emails&#39;, &#39;attorney&#39;]

0.7257 Not only did Senator Burr’s Committee find No Collusion by the Trump Campaign and Russia it’s important because they interviewed 200 witnesses and 300000 pages of documents &amp;amp; the Committee has direct access to intelligence information that’s Classified. @GreggJarrett

0.7211 Wow FBI confirms report that James Comey drafted letter exonerating  Crooked Hillary Clinton long before investigation was complete. Many..

0.7211 RT @TomFitton: .@JudicialWatch uncovers major Ohr-Steele-Fusion GPS collusion docs PLUS did Schiff conspire with Cohen to smear @RealDonald…

0.7143 Former FBI top lawyer James Baker just admitted involvement in FISA Warrant and further admitted there  were IRREGULARITIES in the way the Russia probe was handled. They relied heavily on the unverified Trump “Dossier” paid for by the DNC &amp;amp; Clinton Campaign &amp;amp; funded through a...

0.7101 Why aren’t the Democrats in the House calling Comey Brennan Clapper Page and her FBI lover (whose invaluable phone records were illegally deleted) Crooked Hillary Podesta Ohr (and Nellie) the GPS Fusion characters Christopher Steele the DNC (&amp;amp; their missing server)....
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="show-topic-words-in-context-of-full-tweet">
<h2>Show Topic Words in Context of Full Tweet<a class="headerlink" href="#show-topic-words-in-context-of-full-tweet" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Markdown</span><span class="p">,</span> <span class="n">display</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="k">def</span> <span class="nf">display_bolded_topic_words_in_context</span><span class="p">(</span><span class="n">topic_number</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">number_of_documents</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">custom_words</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✨Topic </span><span class="si">{</span><span class="n">topic_number</span><span class="si">}</span><span class="s2">✨</span><span class="se">\n\n</span><span class="si">{</span><span class="n">topics</span><span class="p">[</span><span class="n">topic_number</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">probability</span><span class="p">,</span> <span class="n">document</span> <span class="ow">in</span> <span class="n">little_mallet_wrapper</span><span class="o">.</span><span class="n">get_top_docs</span><span class="p">(</span><span class="n">training_data</span><span class="p">,</span> <span class="n">topic_distributions</span><span class="p">,</span> <span class="n">topic_number</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="n">number_of_documents</span><span class="p">):</span>

        <span class="n">probability</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;✨✨✨</span><span class="se">\n\n</span><span class="s2">**</span><span class="si">{</span><span class="n">probability</span><span class="si">}</span><span class="s2">**&quot;</span>
        <span class="n">original_text</span> <span class="o">=</span> <span class="n">tweet_dict</span><span class="p">[</span><span class="n">document</span><span class="p">]</span>
        <span class="n">original_text_lowered</span> <span class="o">=</span> <span class="n">original_text</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">topic_words</span> <span class="o">=</span> <span class="n">topics</span><span class="p">[</span><span class="n">topic_number</span><span class="p">]</span>
        <span class="n">topic_words</span> <span class="o">=</span> <span class="n">custom_words</span> <span class="k">if</span> <span class="n">custom_words</span> <span class="o">!=</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">topic_words</span>

        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">topic_words</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">original_text_lowered</span><span class="p">:</span>
                <span class="n">original_text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">b</span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="se">\\</span><span class="s2">b&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;**</span><span class="si">{</span><span class="n">word</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">**&quot;</span><span class="p">,</span> <span class="n">original_text</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>

        <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="n">probability</span><span class="p">)),</span> <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="n">original_text</span><span class="p">))</span>
    <span class="k">return</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">display_bolded_topic_words_in_context</span><span class="p">(</span><span class="n">topic_number</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">number_of_documents</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>✨Topic 0✨

[&#39;fbi&#39;, &#39;campaign&#39;, &#39;clinton&#39;, &#39;trump&#39;, &#39;collusion&#39;, &#39;russia&#39;, &#39;mueller&#39;, &#39;hillary&#39;, &#39;comey&#39;, &#39;report&#39;, &#39;general&#39;, &#39;investigation&#39;, &#39;james&#39;, &#39;information&#39;, &#39;dossier&#39;, &#39;russian&#39;, &#39;intelligence&#39;, &#39;former&#39;, &#39;emails&#39;, &#39;attorney&#39;]
</pre></div>
</div>
<p>✨✨✨</p>
<p><strong>0.7257142857142856</strong></p>
<p>Not only did Senator Burr’s Committee find No <strong>COLLUSION</strong> by the <strong>TRUMP</strong> <strong>CAMPAIGN</strong> and <strong>RUSSIA</strong> it’s important because they interviewed 200 witnesses and 300000 pages of documents &amp; the Committee has direct access to <strong>INTELLIGENCE</strong> <strong>INFORMATION</strong> that’s Classified. &#64;GreggJarrett</p>
<p>✨✨✨</p>
<p><strong>0.7210884353741497</strong></p>
<p>Wow <strong>FBI</strong> confirms <strong>REPORT</strong> that <strong>JAMES</strong> <strong>COMEY</strong> drafted letter exonerating  Crooked <strong>HILLARY</strong> <strong>CLINTON</strong> long before <strong>INVESTIGATION</strong> was complete. Many..</p>
<p>✨✨✨</p>
<p><strong>0.7210884353741497</strong></p>
<p>RT &#64;TomFitton: .&#64;JudicialWatch uncovers major Ohr-Steele-Fusion GPS <strong>COLLUSION</strong> docs PLUS did Schiff conspire with Cohen to smear &#64;RealDonald…</p>
<p>✨✨✨</p>
<p><strong>0.7142857142857143</strong></p>
<p><strong>FORMER</strong> <strong>FBI</strong> top lawyer <strong>JAMES</strong> Baker just admitted involvement in FISA Warrant and further admitted there  were IRREGULARITIES in the way the <strong>RUSSIA</strong> probe was handled. They relied heavily on the unverified <strong>TRUMP</strong> “<strong>DOSSIER</strong>” paid for by the DNC &amp; <strong>CLINTON</strong> <strong>CAMPAIGN</strong> &amp; funded through a...</p>
</div>
</div>
</div>
<div class="section" id="plot-topics-over-time">
<h2>Plot Topics Over Time<a class="headerlink" href="#plot-topics-over-time" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id1">
<h2>Load Topic Distributions<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topic_distributions</span> <span class="o">=</span> <span class="n">little_mallet_wrapper</span><span class="o">.</span><span class="n">load_topic_distributions</span><span class="p">(</span><span class="n">path_to_topic_distributions</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="add-topic-distribution-columns">
<h2>Add Topic Distribution Columns<a class="headerlink" href="#add-topic-distribution-columns" title="Permalink to this headline">¶</a></h2>
<p>Add column with all topic distributions for every tweet</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trump_df</span><span class="p">[</span><span class="s1">&#39;topic_distributions&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">topic_distributions</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Make a separate dataframe with each topic distribution as a separate column</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topic_distributions_df</span> <span class="o">=</span> <span class="n">trump_df</span><span class="p">[</span><span class="s1">&#39;topic_distributions&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Rename each of those columns with the first four words from the topic</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topic_distributions_df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">topic</span><span class="p">[:</span><span class="mi">4</span><span class="p">])</span> <span class="k">for</span> <span class="n">topic</span> <span class="ow">in</span> <span class="n">topics</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Merge that column into the dataframe</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trump_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">trump_df</span><span class="p">,</span> <span class="n">topic_distributions_df</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="date-formatting-for-time-series-plot">
<h2>Date Formatting For Time Series Plot<a class="headerlink" href="#date-formatting-for-time-series-plot" title="Permalink to this headline">¶</a></h2>
<p><strong>Convert to datetime</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trump_df</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">trump_df</span><span class="p">[</span><span class="s1">&#39;created_at&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Extract year</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trump_df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">trump_df</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;%Y&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Extract year and month</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trump_df</span><span class="p">[</span><span class="s1">&#39;year-month&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">trump_df</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">to_period</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trump_df</span><span class="p">[</span><span class="s1">&#39;Date (by month)&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">month</span><span class="o">.</span><span class="n">to_timestamp</span><span class="p">()</span> <span class="k">for</span> <span class="n">month</span> <span class="ow">in</span> <span class="n">trump_df</span><span class="p">[</span><span class="s1">&#39;year-month&#39;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
</div>
<p>((Set year and month as Pandas Index**</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trump_df</span> <span class="o">=</span> <span class="n">trump_df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Date (by month)&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="plot-individual-topics-as-time-series">
<h2>Plot Individual Topics as Time Series<a class="headerlink" href="#plot-individual-topics-as-time-series" title="Permalink to this headline">¶</a></h2>
<p><strong>Topic 10 Label</strong>:</p>
<p>Hillary Clinton (Double-click this cell to enter your own label)</p>
<p>For every Trump tweet, plot the probability of Topic 10</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topic_number</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">topic_label</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">topics</span><span class="p">[</span><span class="n">topic_number</span><span class="p">][:</span><span class="mi">4</span><span class="p">])</span>

<span class="n">trump_df</span><span class="p">[</span><span class="n">topic_label</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Trump Tweets By Topic&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1a69ef4590&gt;
</pre></div>
</div>
<img alt="../../_images/Topic-Modeling-Time-Series_85_11.png" src="../../_images/Topic-Modeling-Time-Series_85_11.png" />
</div>
</div>
<p>For every month of Trump tweets, plot the average probability of Topic 10</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topic_number</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">topic_label</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">topics</span><span class="p">[</span><span class="n">topic_number</span><span class="p">][:</span><span class="mi">4</span><span class="p">])</span>

<span class="n">trump_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">trump_df</span><span class="o">.</span><span class="n">index</span><span class="p">)[[</span><span class="n">topic_label</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Trump Tweets By Topic&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1a68eac310&gt;
</pre></div>
</div>
<img alt="../../_images/Topic-Modeling-Time-Series_87_11.png" src="../../_images/Topic-Modeling-Time-Series_87_11.png" />
</div>
</div>
<p><strong>Topic 18 Label</strong>:</p>
<p>Fake News (Double-click this cell to enter your own label)</p>
<p>For every month of Trump tweets, plot the average probability of Topic 18</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topic_number</span> <span class="o">=</span> <span class="mi">18</span>

<span class="n">topic_label</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">topics</span><span class="p">[</span><span class="n">topic_number</span><span class="p">][:</span><span class="mi">4</span><span class="p">])</span>

<span class="n">trump_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">trump_df</span><span class="o">.</span><span class="n">index</span><span class="p">)[[</span><span class="n">topic_label</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Trump Tweets By Topic&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1a6a29fad0&gt;
</pre></div>
</div>
<img alt="../../_images/Topic-Modeling-Time-Series_91_11.png" src="../../_images/Topic-Modeling-Time-Series_91_11.png" />
</div>
</div>
<p><strong>Topic 9 Label</strong>:</p>
<p>Border Wall (Double-click this cell to enter your own label)</p>
<p>For every month of Trump tweets, plot the average probability of Topic 9</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topic_number</span> <span class="o">=</span> <span class="mi">9</span>

<span class="n">topic_label</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">topics</span><span class="p">[</span><span class="n">topic_number</span><span class="p">][:</span><span class="mi">4</span><span class="p">])</span>

<span class="n">trump_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">trump_df</span><span class="o">.</span><span class="n">index</span><span class="p">)[[</span><span class="n">topic_label</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Trump Tweets By Topic&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1a6eac2090&gt;
</pre></div>
</div>
<img alt="../../_images/Topic-Modeling-Time-Series_95_11.png" src="../../_images/Topic-Modeling-Time-Series_95_11.png" />
</div>
</div>
<p><strong>Topic 19 Label</strong>:</p>
<p>Make America Great Again (Double-click this cell to enter your own label)</p>
<p>For every month of Trump tweets, plot the average probability of Topic 19</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topic_number</span> <span class="o">=</span> <span class="mi">19</span>

<span class="n">topic_label</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">topics</span><span class="p">[</span><span class="n">topic_number</span><span class="p">][:</span><span class="mi">4</span><span class="p">])</span>

<span class="n">trump_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">trump_df</span><span class="o">.</span><span class="n">index</span><span class="p">)[[</span><span class="n">topic_label</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Trump Tweets By Topic&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1a6a68c210&gt;
</pre></div>
</div>
<img alt="../../_images/Topic-Modeling-Time-Series_99_11.png" src="../../_images/Topic-Modeling-Time-Series_99_11.png" />
</div>
</div>
<p><strong>Topic 13 Label</strong>:</p>
<p>The Apprentice (Double-click this cell to enter your own label)</p>
<p>For every month of Trump tweets, plot the average probability of Topic 13</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">topic_number</span> <span class="o">=</span> <span class="mi">13</span>

<span class="n">topic_label</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">topics</span><span class="p">[</span><span class="n">topic_number</span><span class="p">][:</span><span class="mi">4</span><span class="p">])</span>

<span class="n">trump_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">trump_df</span><span class="o">.</span><span class="n">index</span><span class="p">)[[</span><span class="n">topic_label</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Trump Tweets By Topic&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1a6c612410&gt;
</pre></div>
</div>
<img alt="../../_images/Topic-Modeling-Time-Series_103_11.png" src="../../_images/Topic-Modeling-Time-Series_103_11.png" />
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./features/Text-Analysis"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By <a href="https://melaniewalsh.org/">Melanie Walsh</a><br/>
        
            &copy; Copyright 2020.<br/>
          <div class="extra_footer">
            <div>
<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img class="license" alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a> This book is licensed under a <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons BY-NC-SA 4.0 License</a>. The code is licensed under a <a href="https://choosealicense.com/licenses/gpl-3.0/#">GNU General Public License v3.0</a>.
</div>

          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../../_static/js/index.3da636dd464baa7582d2.js"></script>


    
    <!-- Google Analytics -->
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-86905362-3', 'auto');
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>
    <script async src='https://www.google-analytics.com/analytics.js'></script>
    <!-- End Google Analytics -->
    
  </body>
</html>